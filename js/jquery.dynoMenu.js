(function(f){f.dynoMenu=function(k,l){var g={},i=null,a=this,h=function(a,c){"string"===typeof a&&(g[a]=c)},m=function(b){b.find(">li >a").each(function(){var b=f(this),d=b.outerWidth(!0),e;e=null;d<a.calc.averageListItemWidth?b.width(a.calc.averageListItemWidth):d>a.calc.averageListItemWidth&&0<b.next().length&&(b=b.next(),e=b.offset(),e=parseInt(e.left,10)+parseInt(d,10),b.css("left",e))})},j=function(a){var c=f(window).width(),d=a.offset(),e=a.outerWidth(!0),d=parseInt(d.left,10)+parseInt(e,10),
e=0,e=a.closest("ul").offset();d>c?(e=parseInt(e.left,10)-d,a.css("left",e)):m(a)},n=function(){a.el.find(">li > a").each(function(){var b=f(this),c=b.outerWidth(!0),d=b.width();b.css("width",a.calc.averageListItemWidth-(c-d))})},o=function(){var b=Math.floor((a.calc.parentWidth-a.calc.totalListItemWidth)/a.calc.listItemCount),c,d=null;a.el.find(">li >a").each(function(){c=f(this);d=c.width()+b;c.css("width",d)})},p=function(){var a=0;g.listItems.each(function(){var c=f(this).outerWidth(!0);c>a&&
(a=c)});return a},q=function(){var a=0;g.listItems.each(function(){a+=parseInt(f(this).outerWidth(!0),10)});return a};a.settings={};a.events=function(){a.el.on("mouseenter","a",function(){var b=f(this),c=null;b.closest("ul").attr("class")===a.el.attr("class")?0<b.next().length&&j(b.next()):0<b.next().length&&(c=b.next(),j(c),c.addClass("shifted"))});window.onresize=function(){window.clearTimeout(i);i=window.setTimeout(a.updateRender,500)}};a.updateRender=function(){a.el.find("a").attr("style","").css("fontSize",
a.calc.originalFontSize);h("fontSize",a.calc.originalFontSize);var b=a.el.find(".more ul").html();a.el.find(".more").remove();a.el.append(b);a.el.find(".shifted").attr("style","").removeClass("shifted");a.render()};a.render=function(){h("listItems",a.el.find(">li >a"));g.listItems.attr("style","").css("width","auto");a.calc.listItemCount=g.listItems.length;a.calc.parentWidth=a.el.parent().width();a.calc.minListItemWidth=p();a.calc.averageListItemWidth=Math.floor(a.calc.parentWidth/a.calc.listItemCount);
a.calc.totalListItemWidth=q();var b=a.calc;if(b.averageListItemWidth>b.minListItemWidth)n();else if(b.totalListItemWidth<b.parentWidth)o();else if(g.fontSize-=1,g.fontSize>a.settings.minFontSize)a.el.find("a").css("fontSize",g.fontSize),a.render();else if("dropdown"===a.settings.adjustMenuBy){0===a.el.find(".more").length&&a.el.append('<li class="more"><a href="#">more</a><ul></ul></li>');var b=a.el.find(".more"),c=b.prev().clone();b.find("> a").css("fontSize",a.settings.minFontSize);b.prev().remove();
b.find("> ul").prepend(c);a.render()}};a.calc={};a.settings=f.extend({},{minFontSize:11,adjustMenuBy:"dropdown",onSelect:function(){}},l);a.el=f(k);a.calc.originalFontSize=parseInt(a.el.find("> li > a:first").css("fontSize"),10);h("fontSize",a.calc.originalFontSize);a.events();a.render()}})(jQuery);