(function(f){f.dynoMenu=function(i,j){var g=null,a=this,k=function(b){b.find(">li >a").each(function(){var b=f(this),d=b.outerWidth(!0),e;e=null;d<a.calc.averageListItemWidth?b.width(a.calc.averageListItemWidth):d>a.calc.averageListItemWidth&&0<b.next().length&&(b=b.next(),e=b.offset(),e=parseInt(e.left,10)+parseInt(d,10),b.css("left",e))})},h=function(a){var c=f(window).width(),d=a.offset(),e=a.outerWidth(!0),d=parseInt(d.left,10)+parseInt(e,10),e=0,e=a.closest("ul").offset();d>c?(e=parseInt(e.left,
10)-d,a.css("left",e)):k(a)},l=function(){a.el.find(">li > a").each(function(){var b=f(this),c=b.outerWidth(!0),d=b.width();b.css("width",a.calc.averageListItemWidth-(c-d))})},m=function(){var b=Math.floor((a.calc.parentWidth-a.calc.totalListItemWidth)/a.calc.listItemCount),c,d=null;a.el.find(">li >a").each(function(){c=f(this);d=c.width()+b;c.css("width",d)})},n=function(){var b=0;a.el.find("> li > a").each(function(){var a=f(this).outerWidth(!0);a>b&&(b=a)});return b},o=function(){var b=0;a.el.find("> li > a").each(function(){b+=
parseInt(f(this).outerWidth(!0),10)});return b};a.settings={};a.events=function(){a.el.on("mouseenter","a",function(){var b=f(this),c=null;b.closest("ul").attr("class")===a.el.attr("class")?0<b.next().length&&h(b.next()):0<b.next().length&&(c=b.next(),h(c),c.addClass("shifted"))});window.onresize=function(){window.clearTimeout(g);g=window.setTimeout(a.updateRender,500)}};a.updateRender=function(){a.el.find("a").attr("style","").css("fontSize",a.calc.originalFontSize);var b=a.el.find(".more ul").html();
a.el.find(".more").remove();a.el.append(b);a.el.find(".shifted").attr("style","").removeClass("shifted");a.render()};a.render=function(){a.calc.parentWidth=a.el.parent().width();a.calc.minListItemWidth=n();a.calc.averageListItemWidth=Math.floor(a.calc.parentWidth/a.calc.listItemCount);a.calc.totalListItemWidth=o();var b=a.calc;if(b.averageListItemWidth>b.minListItemWidth)l();else if(b.totalListItemWidth<b.parentWidth)m();else{var b=parseInt(a.el.find("> li > a:first").css("fontSize"),10),c=b-1;b>
a.settings.minFontSize?(a.el.find("a").css("fontSize",c),a.render()):"dropdown"===a.settings.adjustMenuBy&&(0===a.el.find(".more").length&&a.el.append('<li class="more"><a href="#">more</a><ul></ul></li>'),b=a.el.find(".more"),c=b.prev().clone(),b.find("> a").css("fontSize",a.settings.minFontSize),b.prev().remove(),b.find("> ul").prepend(c),a.render())}};a.calc={};a.settings=f.extend({},{minFontSize:11,adjustMenuBy:"dropdown",onSelect:function(){}},j);a.el=f(i);a.calc.listItemCount=a.el.find("> li").length;
a.calc.originalFontSize=parseInt(a.el.find("> li > a:first").css("fontSize"),10);a.events();a.render()}})(jQuery);